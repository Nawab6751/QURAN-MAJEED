<!DOCTYPE html>
<html lang="ur" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AL-QURAN DIGITAL | Nawab ZADA</title>
    <style>
        :root { --gold: #D4AF37; --dark-bg: #0a0a0a; --card-bg: #1a1a1a; --white: #ffffff; }
        body { background: var(--dark-bg); color: var(--white); font-family: 'Arial', sans-serif; margin: 0; padding-bottom: 100px; }
        
        /* Header */
        .header { background: #064420; color: var(--gold); padding: 20px; text-align: center; border-bottom: 3px solid var(--gold); }
        .header h1 { margin: 0; font-size: 1.8rem; }
        
        /* Search Bar */
        .search-box { padding: 15px; background: var(--dark-bg); position: sticky; top: 0; z-index: 10; }
        #searchInput { width: 90%; padding: 12px; border-radius: 8px; border: 1px solid var(--gold); background: #222; color: white; outline: none; }

        .container { padding: 15px; }
        
        /* Surah Card */
        .surah-card { 
            background: var(--card-bg); border-radius: 12px; padding: 15px; margin-bottom: 15px; 
            border-left: 5px solid var(--gold); display: flex; justify-content: space-between; align-items: center;
            box-shadow: 0 4px 10px rgba(0,0,0,0.5);
        }
        .surah-info { text-align: right; flex-grow: 1; }
        .surah-info h3 { margin: 0; color: var(--gold); }
        .surah-info p { margin: 5px 0; font-size: 0.8rem; color: #bbb; }

        .btn-group { display: flex; gap: 8px; }
        .btn { padding: 8px 15px; border-radius: 5px; border: none; cursor: pointer; font-weight: bold; display: flex; align-items: center; gap: 5px; }
        .btn-listen { background: var(--gold); color: black; }
        .btn-read { background: white; color: black; }

        /* Sticky Player */
        .audio-player { 
            position: fixed; bottom: 0; width: 100%; background: #111; border-top: 2px solid var(--gold); 
            padding: 10px; display: none; text-align: center; 
        }
        .player-info { font-size: 0.9rem; color: var(--gold); margin-bottom: 5px; }
        audio { width: 95%; height: 35px; }

        /* Reading Modal */
        #readingArea { 
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: var(--dark-bg); z-index: 100; overflow-y: auto; padding: 20px; box-sizing: border-box;
        }
        .close-read { position: sticky; top: 0; background: var(--gold); color: black; padding: 10px; border: none; width: 100%; font-weight: bold; margin-bottom: 20px; }
        .quran-text { font-size: 1.8rem; line-height: 2.5; text-align: center; }
    </style>
</head>
<body>

    <div class="header">
        <h1>AL-QURAN DIGITAL</h1>
        <p>Project by Nawab ZADA</p>
    </div>

    <div class="search-box">
        <input type="text" id="searchInput" placeholder="ÿ≥Ÿàÿ±€Å ÿ™ŸÑÿßÿ¥ ⁄©ÿ±€å⁄∫ (Search Surah)..." onkeyup="filterSurahs()">
    </div>

    <div class="container" id="surahList">
        <p style="text-align: center;">ŸÑŸà⁄à €ÅŸà ÿ±€Åÿß €Å€í (Loading)...</p>
    </div>

    <div class="audio-player" id="playerCont">
        <div class="player-info" id="nowPlaying">Now Reciting: None</div>
        <audio id="mainAudio" controls autoplay></audio>
    </div>

    <div id="readingArea">
        <button class="close-read" onclick="closeRead()">Close Reading ‚úñ</button>
        <div id="textCont" class="quran-text"></div>
    </div>

    <script>
        let allSurahs = [];

        async function init() {
            const res = await fetch('https://api.alquran.cloud/v1/surah');
            const data = await res.json();
            allSurahs = data.data;
            displaySurahs(allSurahs);
        }

        function displaySurahs(list) {
            const container = document.getElementById('surahList');
            container.innerHTML = '';
            list.forEach(surah => {
                container.innerHTML += `
                    <div class="surah-card">
                        <div class="surah-info">
                            <h3>${surah.number}. ${surah.name}</h3>
                            <p>${surah.englishName} | ${surah.numberOfAyahs} Ayahs</p>
                        </div>
                        <div class="btn-group">
                            <button class="btn btn-listen" onclick="playAudio(${surah.number}, '${surah.name}')">‚ñ∂ Listen</button>
                            <button class="btn btn-read" onclick="readSurah(${surah.number})">üìñ Read</button>
                        </div>
                    </div>
                `;
            });
        }

        function filterSurahs() {
            const query = document.getElementById('searchInput').value.toLowerCase();
            const filtered = allSurahs.filter(s => 
                s.name.includes(query) || s.englishName.toLowerCase().includes(query)
            );
            displaySurahs(filtered);
        }

        function playAudio(num, name) {
            const player = document.getElementById('mainAudio');
            const cont = document.getElementById('playerCont');
            const info = document.getElementById('nowPlaying');
            
            const url = `https://download.quranicaudio.com/quran/mishari_rashid_al-afasy/${String(num).padStart(3, '0')}.mp3`;
            player.src = url;
            info.innerText = "Now Reciting: " + name;
            cont.style.display = 'block';
            player.play();
        }

        async function readSurah(num) {
            const area = document.getElementById('readingArea');
            const textCont = document.getElementById('textCont');
            area.style.display = 'block';
            textCont.innerText = "ŸÑŸà⁄à €ÅŸà ÿ±€Åÿß €Å€í...";
            
            const res = await fetch(`https://api.alquran.cloud/v1/surah/${num}`);
            const data = await res.json();
            const text = data.data.ayahs.map(a => a.text).join(' €ù ');
            textCont.innerText = text;
        }

        function closeRead() {
            document.getElementById('readingArea').style.display = 'none';
        }

        init();
    </script>
</body>
</html>
